<div><script type="@plotdb/block">var mod;module.exports={pkg:{name:"@makeform/radio",extend:{name:"@makeform/common"},i18n:{en:{"其它":"Other"},"zh-TW":{"其它":"其它"}}},init:function(e){return e.pubsub.fire("subinit",{mod:mod(e)})}};mod=function(e){var a,t,n,r,l,o,d,f,c;a=e.root,t=e.ctx,n=e.data,r=e.parent,l=e.t,o=e.i18n;d=t.ldview;f={};c="_"+Math.random().toString(36).substring(2);return{init:function(){var r,o,n,i,e,t,u=this;this.on("change",function(){return u.mod.child.view.render("option")});r=function(e){if(typeof e==="object"){return e.value}else{return e}};o=function(e){if(typeof e==="object"){return l(e.label)}else{return l(e)}};n=function(t){var e;e=(f.values||[]).filter(function(e){return r(e)===t})[0];e=e&&e.label?e.label:e;return e?l(e):typeof t==="string"?l(t):t};i=function(e){return in$(e,(u.mod.info.config.values||[]).map(function(e){return r(e)}))};e=function(){return f.values=(u.mod.info.config||{}).values||[]};e();this.on("meta",function(){return e()});return this.mod.child.view=t=new d({root:a,text:{content:function(e){var t;t=e.node;if(u.isEmpty()){return"n/a"}else{return n(u.content())}},"other-prompt":function(e){var t,n,r;t=e.node;if(n=((r=u.mod.info.config).other||(r.other={})).prompt){return l(n)}else{return l("其它")}}},action:{input:{"other-text":function(e){var t;t=e.node;return u.value(t.value)}},change:{"other-radio":function(e){var t,n;t=e.node,n=e.ctx;if(i(u.value())||!u.value()){return u.value("")}}}},handler:{input:function(e){var t;t=e.node;return t.classList.toggle("text-danger",u.status()===2)},other:function(e){var t,n;t=e.node;return t.classList.toggle("d-none",!((n=u.mod.info.config).other||(n.other={})).enabled)},"other-radio":function(e){var t;t=e.node;t.setAttribute("name",c);if(!u.mod.info.meta.readonly){t.removeAttribute("disabled")}else{t.setAttribute("disabled",null)}return t.checked=!i(u.value())},"other-text":function(e){var t,n;t=e.node;if(!u.mod.info.meta.readonly){t.removeAttribute("readonly")}else{t.setAttribute("readonly",null)}n=u.value();return t.value=i(n)?"":n!=null?n:""},option:{list:function(){return u.mod.info.config.values||[]},key:function(e){return r(e)},view:{action:{change:{radio:function(e){var t,n;t=e.node,n=e.ctx;if(t.checked){return u.value(r(n))}}}},handler:{"@":function(e){var t;t=e.node;return t.style.flexBasis=(u.mod.info.config||{}).layout==="block"?"100%":""},radio:function(e){var t,n;t=e.node,n=e.ctx;t.setAttribute("name",c);t.checked=u.value()===r(n);if(!u.mod.info.meta.readonly){return t.removeAttribute("disabled")}else{return t.setAttribute("disabled",null)}}},text:{text:function(e){var t,n;t=e.node,n=e.ctx;return o(n)}}}}}})},render:function(){return this.mod.child.view.render()}}};function in$(e,t){var n=-1,r=t.length>>>0;while(++n<r)if(e===t[n])return true;return false}</script><div plug="body"><div class="m-edit" ld="input"><div class="my-2 has-tips manual" ld="error-root"><div class="d-flex g-2 flex-wrap"><label class="mb-0 mr-2 clickable d-flex" ld-each="option" style="line-height:1.25em"><input class="mr-1" ld="radio" type="radio"><span ld="text"></span></label></div><div class="mt-2" ld="other"><label class="clickable d-flex align-items-center"><input class="mr-1" ld="other-radio" type="radio"><div class="mr-2 text-nowrap" ld="other-prompt"></div><input class="form-control form-control-sm" type="text" ld="other-text"></label></div><div class="hover-tip tip-sm"><div ld-each="error"></div></div></div></div><div class="m-view" ld="content"></div></div></div>
